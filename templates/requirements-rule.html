<!-- templates/requirements-rule.html -->
<div class="rule-card" data-rule-type="requirements" data-rule-index="{{index}}">
    <div class="rule-card-header">
        <span class="rule-type-badge">Свойство</span>
        <select class="rule-cardinality {{cardinalityClass}}" onchange="updateCardinality(this, {{index}})">
            <option value="required" {{requiredSelected}}>Обязательно</option>
            <option value="optional" {{optionalSelected}}>Опционально</option>
            <option value="prohibited" {{prohibitedSelected}}>Запрещено</option>
        </select>
        <button class="icon-btn" onclick="removeRule('requirements', {{index}})" title="Удалить">✕</button>
    </div>
    <div class="rule-fields">
        <div class="rule-field">
            <label>PropertySet</label>
            <input type="text" value="{{propertySet}}" placeholder="Например: ExpCheck_Wall"
                   onchange="updatePropertySet(this, {{index}})">
        </div>
        <div class="rule-field">
            <label>Имя свойства</label>
            <input type="text" value="{{field}}" placeholder="Например: MGE_ElementCode"
                   onchange="updateRuleField(this, 'requirements', {{index}})">
        </div>
        <div class="rule-field">
            <label>Тип данных</label>
            <input type="text" 
                class="value-input" 
                list="ifcDataTypes-{{index}}"
                value="{{dataType}}" 
                placeholder="Выберите или введите тип данных"
                onchange="updateDataType(this, {{index}})">
            <datalist id="ifcDataTypes-{{index}}">
                {{dataTypeOptions}}
            </datalist>
        </div>
        <div class="rule-field">
            <label>Условие</label>
            <select onchange="updateRuleCondition(this, 'requirements', {{index}})">
                <option value="equals" {{equalsSelected}}>Равно</option>
                <option value="startsWith" {{startsWithSelected}}>Начинается с</option>
                <option value="contains" {{containsSelected}}>Содержит</option>
                <option value="endsWith" {{endsWithSelected}}>Заканчивается на</option>
                <option value="in" {{inSelected}}>Одно из списка</option>
            </select>
        </div>
        <div class="rule-field">
            <label>Значение</label>
            {{valueInput}}
        </div>
    </div>
</div>